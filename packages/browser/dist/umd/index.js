!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TronicReceiver=e():t.TronicReceiver=e()}(self,(function(){return function(){var t,e,n={878:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(325));function i(t,e){return function(){var n=this.traits(),r=this.properties?this.properties():{};return o.default(n,"address."+t)||o.default(n,t)||(e?o.default(n,"address."+e):null)||(e?o.default(n,e):null)||o.default(r,"address."+t)||o.default(r,t)||(e?o.default(r,"address."+e):null)||(e?o.default(r,e):null)}}e.default=function(t){t.zip=i("postalCode","zip"),t.country=i("country"),t.street=i("street"),t.state=i("state"),t.city=i("city"),t.region=i("region")}},780:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Alias=void 0;var o=r(n(285)),i=n(512);function u(t,e){i.Facade.call(this,t,e)}e.Alias=u,o.default(u,i.Facade),u.prototype.action=function(){return"alias"},u.prototype.type=u.prototype.action,u.prototype.previousId=function(){return this.field("previousId")||this.field("from")},u.prototype.from=u.prototype.previousId,u.prototype.userId=function(){return this.field("userId")||this.field("to")},u.prototype.to=u.prototype.userId},814:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function t(e){if("object"!=typeof e)return e;if("[object Object]"===Object.prototype.toString.call(e)){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=t(e[r]));return n}return Array.isArray(e)?e.map(t):e}},257:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=void 0;var o=r(n(285)),i=n(512);function u(t,e){i.Facade.call(this,t,e)}e.Delete=u,o.default(u,i.Facade),u.prototype.type=function(){return"delete"}},512:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Facade=void 0;var o=r(n(878)),i=n(814),u=r(n(272)),a=r(n(870)),s=r(n(325)),c=r(n(279));function l(t,e){e=e||{},this.raw=i.clone(t),"clone"in e||(e.clone=!0),e.clone&&(t=i.clone(t)),"traverse"in e||(e.traverse=!0),t.timestamp="timestamp"in t?a.default(t.timestamp):new Date,e.traverse&&c.default(t),this.opts=e,this.obj=t}e.Facade=l;var f=l.prototype;function p(t){return i.clone(t)}f.proxy=function(t){var e=t.split("."),n=this[t=e.shift()]||this.obj[t];return n?("function"==typeof n&&(n=n.call(this)||{}),0===e.length||(n=s.default(n,e.join("."))),this.opts.clone?p(n):n):n},f.field=function(t){var e=this.obj[t];return this.opts.clone?p(e):e},l.proxy=function(t){return function(){return this.proxy(t)}},l.field=function(t){return function(){return this.field(t)}},l.multi=function(t){return function(){var e=this.proxy(t+"s");if(Array.isArray(e))return e;var n=this.proxy(t);return n&&(n=[this.opts.clone?i.clone(n):n]),n||[]}},l.one=function(t){return function(){var e=this.proxy(t);if(e)return e;var n=this.proxy(t+"s");return Array.isArray(n)?n[0]:void 0}},f.json=function(){var t=this.opts.clone?i.clone(this.obj):this.obj;return this.type&&(t.type=this.type()),t},f.rawEvent=function(){return this.raw},f.options=function(t){var e=this.obj.options||this.obj.context||{},n=this.opts.clone?i.clone(e):e;if(!t)return n;if(this.enabled(t)){var r=this.integrations(),o=r[t]||s.default(r,t);return"object"!=typeof o&&(o=s.default(this.options(),t)),"object"==typeof o?o:{}}},f.context=f.options,f.enabled=function(t){var e=this.proxy("options.providers.all");"boolean"!=typeof e&&(e=this.proxy("options.all")),"boolean"!=typeof e&&(e=this.proxy("integrations.all")),"boolean"!=typeof e&&(e=!0);var n=e&&u.default(t),r=this.integrations();if(r.providers&&r.providers.hasOwnProperty(t)&&(n=r.providers[t]),r.hasOwnProperty(t)){var o=r[t];n="boolean"!=typeof o||o}return!!n},f.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},f.active=function(){var t=this.proxy("options.active");return null==t&&(t=!0),t},f.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},f.sessionId=f.anonymousId,f.groupId=l.proxy("options.groupId"),f.traits=function(t){var e=this.proxy("options.traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=null==this[r]?this.proxy("options.traits."+r):this[r]();if(null==o)continue;e[t[r]]=o,delete e[r]}return e},f.library=function(){var t=this.proxy("options.library");return t?"string"==typeof t?{name:t,version:null}:t:{name:"unknown",version:null}},f.device=function(){var t=this.proxy("context.device");"object"==typeof t&&null!==t||(t={});var e=this.library().name;return t.type||(e.indexOf("ios")>-1&&(t.type="ios"),e.indexOf("android")>-1&&(t.type="android")),t},f.userAgent=l.proxy("context.userAgent"),f.timezone=l.proxy("context.timezone"),f.timestamp=l.field("timestamp"),f.channel=l.field("channel"),f.ip=l.proxy("context.ip"),f.userId=l.field("userId"),o.default(f)},615:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var o=r(n(285)),i=r(n(554)),u=r(n(870)),a=n(512);function s(t,e){a.Facade.call(this,t,e)}e.Group=s,o.default(s,a.Facade);var c=s.prototype;c.action=function(){return"group"},c.type=c.action,c.groupId=a.Facade.field("groupId"),c.created=function(){var t=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(t)return u.default(t)},c.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.groupId();return i.default(e)?e:void 0},c.traits=function(t){var e=this.properties(),n=this.groupId();for(var r in t=t||{},n&&(e.id=n),t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=null==this[r]?this.proxy("traits."+r):this[r]();if(null==o)continue;e[t[r]]=o,delete e[r]}return e},c.name=a.Facade.proxy("traits.name"),c.industry=a.Facade.proxy("traits.industry"),c.employees=a.Facade.proxy("traits.employees"),c.properties=function(){return this.field("traits")||this.field("properties")||{}}},705:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Identify=void 0;var o=n(512),i=r(n(325)),u=r(n(285)),a=r(n(554)),s=r(n(870)),c=function(t){return t.trim()};function l(t,e){o.Facade.call(this,t,e)}e.Identify=l,u.default(l,o.Facade);var f=l.prototype;f.action=function(){return"identify"},f.type=f.action,f.traits=function(t){var e=this.field("traits")||{},n=this.userId();for(var r in t=t||{},n&&(e.id=n),t){var o=null==this[r]?this.proxy("traits."+r):this[r]();null!=o&&(e[t[r]]=o,r!==t[r]&&delete e[r])}return e},f.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.userId();return a.default(e)?e:void 0},f.created=function(){var t=this.proxy("traits.created")||this.proxy("traits.createdAt");if(t)return s.default(t)},f.companyCreated=function(){var t=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(t)return s.default(t)},f.companyName=function(){return this.proxy("traits.company.name")},f.name=function(){var t=this.proxy("traits.name");if("string"==typeof t)return c(t);var e=this.firstName(),n=this.lastName();return e&&n?c(e+" "+n):void 0},f.firstName=function(){var t=this.proxy("traits.firstName");if("string"==typeof t)return c(t);var e=this.proxy("traits.name");return"string"==typeof e?c(e).split(" ")[0]:void 0},f.lastName=function(){var t=this.proxy("traits.lastName");if("string"==typeof t)return c(t);var e=this.proxy("traits.name");if("string"==typeof e){var n=c(e).indexOf(" ");if(-1!==n)return c(e.substr(n+1))}},f.uid=function(){return this.userId()||this.username()||this.email()},f.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},f.age=function(){var t=this.birthday(),e=i.default(this.traits(),"age");return null!=e?e:t instanceof Date?(new Date).getFullYear()-t.getFullYear():void 0},f.avatar=function(){var t=this.traits();return i.default(t,"avatar")||i.default(t,"photoUrl")||i.default(t,"avatarUrl")},f.position=function(){var t=this.traits();return i.default(t,"position")||i.default(t,"jobTitle")},f.username=o.Facade.proxy("traits.username"),f.website=o.Facade.one("traits.website"),f.websites=o.Facade.multi("traits.website"),f.phone=o.Facade.one("traits.phone"),f.phones=o.Facade.multi("traits.phone"),f.address=o.Facade.proxy("traits.address"),f.gender=o.Facade.proxy("traits.gender"),f.birthday=o.Facade.proxy("traits.birthday")},122:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Group=e.Alias=e.Facade=void 0;var o=n(512);Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return o.Facade}});var i=n(780);Object.defineProperty(e,"Alias",{enumerable:!0,get:function(){return i.Alias}});var u=n(615);Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return u.Group}});var a=n(705);Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return a.Identify}});var s=n(480);Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return s.Track}});var c=n(926);Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return c.Page}});var l=n(207);Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return l.Screen}});var f=n(257);Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return f.Delete}}),e.default=r(r({},o.Facade),{Alias:i.Alias,Group:u.Group,Identify:a.Identify,Track:s.Track,Page:c.Page,Screen:l.Screen,Delete:f.Delete})},554:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/.+\@.+\..+/;e.default=function(t){return n.test(t)}},272:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Salesforce:!0};e.default=function(t){return!n[t]}},926:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Page=void 0;var o=r(n(285)),i=n(512),u=n(480),a=r(n(554));function s(t,e){i.Facade.call(this,t,e)}e.Page=s,o.default(s,i.Facade);var c=s.prototype;c.action=function(){return"page"},c.type=c.action,c.category=i.Facade.field("category"),c.name=i.Facade.field("name"),c.title=i.Facade.proxy("properties.title"),c.path=i.Facade.proxy("properties.path"),c.url=i.Facade.proxy("properties.url"),c.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},c.properties=function(t){var e=this.field("properties")||{},n=this.category(),r=this.name();for(var o in t=t||{},n&&(e.category=n),r&&(e.name=r),t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=null==this[o]?this.proxy("properties."+o):this[o]();if(null==i)continue;e[t[o]]=i,o!==t[o]&&delete e[o]}return e},c.email=function(){var t=this.proxy("context.traits.email")||this.proxy("properties.email");if(t)return t;var e=this.userId();return a.default(e)?e:void 0},c.fullName=function(){var t=this.category(),e=this.name();return e&&t?t+" "+e:e},c.event=function(t){return t?"Viewed "+t+" Page":"Loaded a Page"},c.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new u.Track(e,this.opts)}},207:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Screen=void 0;var o=r(n(285)),i=n(926),u=n(480);function a(t,e){i.Page.call(this,t,e)}e.Screen=a,o.default(a,i.Page),a.prototype.action=function(){return"screen"},a.prototype.type=a.prototype.action,a.prototype.event=function(t){return t?"Viewed "+t+" Screen":"Loaded a Screen"},a.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new u.Track(e,this.opts)}},480:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var o=r(n(285)),i=n(512),u=n(705),a=r(n(554)),s=r(n(325));function c(t,e){i.Facade.call(this,t,e)}e.Track=c,o.default(c,i.Facade);var l=c.prototype;l.action=function(){return"track"},l.type=l.action,l.event=i.Facade.field("event"),l.value=i.Facade.proxy("properties.value"),l.category=i.Facade.proxy("properties.category"),l.id=i.Facade.proxy("properties.id"),l.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},l.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},l.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},l.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},l.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},l.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},l.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},l.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},l.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},l.sku=i.Facade.proxy("properties.sku"),l.tax=i.Facade.proxy("properties.tax"),l.name=i.Facade.proxy("properties.name"),l.price=i.Facade.proxy("properties.price"),l.total=i.Facade.proxy("properties.total"),l.repeat=i.Facade.proxy("properties.repeat"),l.coupon=i.Facade.proxy("properties.coupon"),l.shipping=i.Facade.proxy("properties.shipping"),l.discount=i.Facade.proxy("properties.discount"),l.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},l.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},l.description=i.Facade.proxy("properties.description"),l.plan=i.Facade.proxy("properties.plan"),l.subtotal=function(){var t=s.default(this.properties(),"subtotal"),e=this.total()||this.revenue();if(t)return t;if(!e)return 0;if(this.total()){var n=this.tax();n&&(e-=n),(n=this.shipping())&&(e-=n),(n=this.discount())&&(e+=n)}return e},l.products=function(){var t=this.properties(),e=s.default(t,"products");return Array.isArray(e)?e.filter((function(t){return null!==t})):[]},l.quantity=function(){return(this.obj.properties||{}).quantity||1},l.currency=function(){return(this.obj.properties||{}).currency||"USD"},l.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},l.query=i.Facade.proxy("options.query"),l.properties=function(t){var e=this.field("properties")||{};for(var n in t=t||{})if(Object.prototype.hasOwnProperty.call(t,n)){var r=null==this[n]?this.proxy("properties."+n):this[n]();if(null==r)continue;e[t[n]]=r,delete e[n]}return e},l.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},l.email=function(){var t=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(t)return t;var e=this.userId();return a.default(e)?e:void 0},l.revenue=function(){var t=this.proxy("properties.revenue"),e=this.event();return!t&&e&&e.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(t=this.proxy("properties.total")),function(t){if(!t)return;if("number"==typeof t)return t;if("string"!=typeof t)return;if(t=t.replace(/\$/g,""),t=parseFloat(t),!isNaN(t))return t}(t)},l.cents=function(){var t=this.revenue();return"number"!=typeof t?this.value()||0:100*t},l.identify=function(){var t=this.json();return t.traits=this.traits(),new u.Identify(t,this.opts)}},279:function(t,e,n){"use strict";var r=n(264);function o(t,e){return void 0===e&&(e=!0),t&&"object"==typeof t?function(t,e){return Object.keys(t).forEach((function(n){t[n]=o(t[n],e)})),t}(t,e):Array.isArray(t)?function(t,e){return t.forEach((function(n,r){t[r]=o(n,e)})),t}(t,e):r.is(t,e)?r.parse(t):t}t.exports=o},264:function(t,e){"use strict";var n=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;e.parse=function(t){var e=[1,5,6,7,11,12],r=n.exec(t),o=0;if(!r)return new Date(t);for(var i,u=0;i=e[u];u++)r[i]=parseInt(r[i],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?o=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(o=60*r[11]+r[12],"+"===r[10]&&(o=0-o));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+o,r[7],r[8]);return new Date(a)},e.is=function(t,e){return"string"==typeof t&&((!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&n.test(t))}},285:function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},870:function(t,e,n){"use strict";var r=n(264),o=n(228),i=n(76),u=Object.prototype.toString;t.exports=function(t){return e=t,"[object Date]"===u.call(e)?t:function(t){return"[object Number]"===u.call(t)}(t)?new Date((n=t)<315576e5?1e3*n:n):r.is(t)?r.parse(t):o.is(t)?o.parse(t):i.is(t)?i.parse(t):new Date(t);var e,n}},228:function(t,e){"use strict";var n=/\d{13}/;e.is=function(t){return n.test(t)},e.parse=function(t){return t=parseInt(t,10),new Date(t)}},76:function(t,e){"use strict";var n=/\d{10}/;e.is=function(t){return n.test(t)},e.parse=function(t){var e=1e3*parseInt(t,10);return new Date(e)}},325:function(t){function e(t){return function(e,n,r,i){var u,a=i&&function(t){return"function"==typeof t}(i.normalizer)?i.normalizer:o;n=a(n);for(var s=!1;!s;)c();function c(){for(u in e){var t=a(u);if(0===n.indexOf(t)){var r=n.substr(t.length);if("."===r.charAt(0)||0===r.length){n=r.substr(1);var o=e[u];return null==o?void(s=!0):n.length?void(e=o):void(s=!0)}}}u=void 0,s=!0}if(u)return null==e?e:t(e,u,r)}}function n(t,e){return t.hasOwnProperty(e)&&delete t[e],t}function r(t,e,n){return t.hasOwnProperty(e)&&(t[e]=n),t}function o(t){return t.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}t.exports=e((function(t,e){if(t.hasOwnProperty(e))return t[e]})),t.exports.find=t.exports,t.exports.replace=function(t,n,o,i){return e(r).call(this,t,n,o,i),t},t.exports.del=function(t,r,o){return e(n).call(this,t,r,null,o),t}},204:function(t,e,n){"use strict";function r(){return"undefined"!=typeof window}function o(){return!r()}n.d(e,{j:function(){return r},s:function(){return o}})},863:function(t,e,n){"use strict";function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}}n.d(e,{a:function(){return r}})},905:function(t,e,n){"use strict";n.d(e,{D4:function(){return i},aV:function(){return o}});var r="receiver";function o(){return window[r]}function i(t){r=t}},70:function(t,e,n){"use strict";function r(t){return Array.prototype.slice.call(window.document.querySelectorAll("script")).find((function(e){return e.src===t}))}function o(t,e){var n=r(t);if(void 0!==n){var o=null==n?void 0:n.getAttribute("status");if("loaded"===o)return Promise.resolve(n);if("loading"===o)return new Promise((function(t,e){n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(t){return e(t)}))}))}return new Promise((function(n,r){var o,i=window.document.createElement("script");i.type="text/javascript",i.src=t,i.async=!0,i.setAttribute("status","loading");for(var u=0,a=Object.entries(null!=e?e:{});u<a.length;u++){var s=a[u],c=s[0],l=s[1];i.setAttribute(c,l)}i.onload=function(){i.onerror=i.onload=null,i.setAttribute("status","loaded"),n(i)},i.onerror=function(){i.onerror=i.onload=null,i.setAttribute("status","error"),r(new Error("Failed to load ".concat(t)))};var f=window.document.getElementsByTagName("script")[0];null===(o=f.parentElement)||void 0===o||o.insertBefore(i,f)}))}n.d(e,{v:function(){return o}})},566:function(t,e,n){"use strict";n.d(e,{Kg:function(){return s},UH:function(){return u},Vl:function(){return a}});var r,o=n(905),i=/(https:\/\/.*)\/receiver\.js\/v1\/(?:.*?)\/(?:platform|receiver.*)?/,u=function(t){var e=(0,o.aV)();e&&(e._cdn=t),r=t},a=function(){var t,e=null!=r?r:null===(t=(0,o.aV)())||void 0===t?void 0:t._cdn;if(e)return e;var n,u=(Array.prototype.slice.call(document.querySelectorAll("script")).forEach((function(t){var e,r=null!==(e=t.getAttribute("src"))&&void 0!==e?e:"",o=i.exec(r);o&&o[1]&&(n=o[1])})),n);return u||"https://cdn.tronic.com"},s=function(){var t=a();return"".concat(t,"/next-integrations")}},950:function(t,e,n){"use strict";n.d(e,{D:function(){return o}});var r=n(122);function o(t,e){var n=new r.Facade(t,e);return"track"===t.type&&(n=new r.Track(t,e)),"identify"===t.type&&(n=new r.Identify(t,e)),Object.defineProperty(n,"obj",{value:t,writable:!0}),n}},338:function(t,e,n){"use strict";n.r(e),n.d(e,{applyDestinationMiddleware:function(){return a},sourceMiddlewarePlugin:function(){return s}});var r=n(494),o=n(950),i=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},u=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function a(t,e,n){return i(this,void 0,Promise,(function(){function t(t,e){return i(this,void 0,Promise,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return!1,n=null,[4,e({payload:(0,o.D)(t,{clone:!0,traverse:!1}),next:function(t){!0,null===t&&(n=null),t&&(n=t.obj)}})];case 1:return r.sent(),[2,n]}}))}))}var r,a,s,c,l;return u(this,(function(i){switch(i.label){case 0:r=(0,o.D)(e,{clone:!0,traverse:!1}).rawEvent(),a=0,s=n,i.label=1;case 1:return a<s.length?(c=s[a],[4,t(r,c)]):[3,4];case 2:if(null===(l=i.sent()))return[2,null];r=l,i.label=3;case 3:return a++,[3,1];case 4:return[2,r]}}))}))}function s(t){function e(e){return i(this,void 0,Promise,(function(){var n;return u(this,(function(i){switch(i.label){case 0:return n=!1,[4,t({payload:(0,o.D)(e.event,{clone:!0,traverse:!1}),next:function(t){n=!0,t&&(e.event=t.obj)}})];case 1:if(i.sent(),!n)throw new r.Y({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,e]}}))}))}return{name:"Source Middleware ".concat(t.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(t){return Promise.resolve(t)},track:e,identify:e}}},888:function(t,e,n){"use strict";function r(t,e){return new Promise((function(n,r){var o=setTimeout((function(){r(Error("Promise timed out"))}),e);t.then((function(t){return clearTimeout(o),n(t)})).catch(r)}))}function o(t,e,n){var o;return(o=n,new Promise((function(t){return setTimeout(t,o)}))).then((function(){return r(function(){try{return Promise.resolve(e(t))}catch(t){return Promise.reject(t)}}(),1e3)})).catch((function(e){null==t||t.log("warn","Callback Error",{error:e}),null==t||t.stats.increment("callback_error")})).then((function(){return t}))}n.d(e,{FJ:function(){return r},UI:function(){return o}})},494:function(t,e,n){"use strict";n.d(e,{Y:function(){return s},_:function(){return c}});var r=n(831),o=n(380),i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},u=function(){function t(){this._logs=[]}return t.prototype.log=function(t,e,n){var r=new Date;this._logs.push({level:t,message:e,time:r,extras:n})},Object.defineProperty(t.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),t.prototype.flush=function(){if(this.logs.length>1){var t=this._logs.reduce((function(t,e){var n,r,o,u=i(i({},e),{json:JSON.stringify(e.extras,null," "),extras:e.extras});delete u.time;var a=null!==(o=null===(r=e.time)||void 0===r?void 0:r.toISOString())&&void 0!==o?o:"";return t[a]&&(a="".concat(a,"-").concat(Math.random())),i(i({},t),((n={})[a]=u,n))}),{});console.table?console.table(t):console.log(t)}else this.logs.forEach((function(t){var e=t.level,n=t.message,r=t.extras;"info"===e||"debug"===e?console.log(n,null!=r?r:""):console[e](n,null!=r?r:"")}));this._logs=[]},t}(),a=n(417),s=function(t){var e,n,r;this.retry=null===(e=t.retry)||void 0===e||e,this.type=null!==(n=t.type)&&void 0!==n?n:"plugin Error",this.reason=null!==(r=t.reason)&&void 0!==r?r:""},c=function(){function t(t,e,n,o){void 0===e&&(e=(0,r.v4)()),void 0===n&&(n=new a.i),void 0===o&&(o=new u),this.attempts=0,this.event=t,this._id=e,this.logger=o,this.stats=n}return t.system=function(){},t.prototype.isSame=function(t){return t.id===this.id},t.prototype.cancel=function(t){if(t)throw t;throw new s({reason:"Context Cancel"})},t.prototype.log=function(t,e,n){this.logger.log(t,e,n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.updateEvent=function(t,e){return(0,o.N)(this.event,t,e),this.event},t.prototype.failedDelivery=function(){return this._failedDelivery},t.prototype.setFailedDelivery=function(t){this._failedDelivery=t},t.prototype.logs=function(){return this.logger.logs},t.prototype.flush=function(){this.logger.flush(),this.stats.flush()},t.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},t}()},417:function(t,e,n){"use strict";n.d(e,{i:function(){return a},s:function(){return u}});var r,o=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)},u=function(){function t(){this.metrics=[]}return t.prototype.increment=function(t,e,n){void 0===e&&(e=1),this.metrics.push({metric:t,value:e,tags:null!=n?n:[],type:"counter",timestamp:Date.now()})},t.prototype.gauge=function(t,e,n){this.metrics.push({metric:t,value:e,tags:null!=n?n:[],type:"gauge",timestamp:Date.now()})},t.prototype.flush=function(){var t=this.metrics.map((function(t){return i(i({},t),{tags:t.tags.join(",")})}));console.table?console.table(t):console.log(t),this.metrics=[]},t.prototype.serialize=function(){return this.metrics.map((function(t){return{m:t.metric,v:t.value,t:t.tags,k:(e=t.type,{gauge:"g",counter:"c"}[e]),e:t.timestamp};var e}))},t}(),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.gauge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.increment=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.flush=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.serialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return[]},e}(u)},595:function(t,e,n){"use strict";function r(t){return"string"==typeof t}function o(t){return"number"==typeof t}function i(t){return"function"==typeof t}function u(t){return null!=t}function a(t){return"object"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}n.d(e,{Gg:function(){return u},HD:function(){return r},PO:function(){return a},hj:function(){return o},mf:function(){return i}})},831:function(t,e,n){"use strict";n.d(e,{v4:function(){return u}});for(var r,o=256,i=[];o--;)i[o]=(o+256).toString(16).substring(1);function u(){var t,e=0,n="";if(!r||o+16>256){for(r=Array(e=256);e--;)r[e]=256*Math.random()|0;e=o=0}for(;e<16;e++)t=r[o+e],n+=6==e?i[15&t|64]:8==e?i[63&t|128]:i[t],1&e&&e>1&&e<11&&(n+="-");return o++,n}},380:function(t,e,n){"use strict";function r(t,e,n){e.split&&(e=e.split("."));for(var r,o,i=0,u=e.length,a=t;i<u&&"__proto__"!==(o=e[i++])&&"constructor"!==o&&"prototype"!==o;)a=a[o]=i===u?n:typeof(r=a[o])==typeof e?r:0*e[i]!=0||~(""+e[i]).indexOf(".")?{}:[]}n.d(e,{N:function(){return r}})}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return n[t].call(i.exports,i,i.exports,o),i.exports}o.m=n,o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,n){return o.f[n](t,e),e}),[]))},o.u=function(t){return{96:"queryString",119:"auto-track",214:"remoteMiddleware"}[t]+".bundle."+{96:"ff94b41a75f57fbcd624",119:"adec29ef96724b419515",214:"e2d0030c368988b4e809"}[t]+".js"},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t={},e="@tronic/receiver-browser:",o.l=function(n,r,i,u){if(t[n])t[n].push(r);else{var a,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==e+i){a=f;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",e+i),a.src=n),t[n]=[r];var p=function(e,r){a.onerror=a.onload=null,clearTimeout(h);var o=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(t){return t(r)})),e)return e(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),s&&document.head.appendChild(a)}},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.p="",function(){var t={826:0};o.f.j=function(e,n){var r=o.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,o){r=t[e]=[n,o]}));n.push(r[2]=i);var u=o.p+o.u(e),a=new Error;o.l(u,(function(n){if(o.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),u=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+u+")",a.name="ChunkLoadError",a.type=i,a.request=u,r[1](a)}}),"chunk-"+e,e)}};var e=function(e,n){var r,i,u=n[0],a=n[1],s=n[2],c=0;if(u.some((function(e){return 0!==t[e]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(s)s(o)}for(e&&e(n);c<u.length;c++)i=u[c],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunk_tronic_receiver_browser=self.webpackChunk_tronic_receiver_browser||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var i={};return function(){"use strict";o.r(i),o.d(i,{ReceiverBrowser:function(){return fn},loadLegacySettings:function(){return an}});var t=o(566),e="npm";function n(){return e}function r(t,e){return e=e||{},new Promise((function(n,r){var o=new XMLHttpRequest,i=[],u=[],a={},s=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:s,headers:{keys:function(){return i},entries:function(){return u},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var c in o.open(e.method||"get",t,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){i.push(e=e.toLowerCase()),u.push([e,n]),a[e]=a[e]?a[e]+","+n:n})),n(s())},o.onerror=r,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(c,e.headers[c]);o.send(e.body||null)}))}var u=function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:null},a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=u();return(n&&n.fetch||r).apply(void 0,t)},s=o(595);function c(t,e,n,r,o,i){var u,a=[t,e,n,r,o,i];if(!t||!(0,s.HD)(t))throw new Error("ChannelId missing");if(!e||!(0,s.HD)(e))throw new Error("UserId missing");var c=(0,s.PO)(n)?n.event:n;if(!c||!(0,s.HD)(c))throw new Error("Event missing");var l=(0,s.PO)(n)?null!==(u=n.properties)&&void 0!==u?u:{}:(0,s.PO)(r)?r:{},f={};return(0,s.mf)(o)||(f=null!=o?o:{}),(0,s.PO)(n)&&!(0,s.mf)(r)&&(f=null!=r?r:{}),[t,e,c,l,f,a.find(s.mf)]}var l=o(204);function f(){return!(!(0,l.j)()||window.navigator.onLine)}var p=o(494),h=o(417),d="0.0.1",y="localhost:3000",v=function(){return v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},v.apply(this,arguments)},b=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function g(t){console.error("Error sending tronic performance metrics",t)}var w,_,x=function(){function t(t){var e,n,r,o,i=this;if(this.host=null!==(e=null==t?void 0:t.host)&&void 0!==e?e:y,this.sampleRate=null!==(n=null==t?void 0:t.sampleRate)&&void 0!==n?n:1,this.flushTimer=null!==(r=null==t?void 0:t.flushTimer)&&void 0!==r?r:3e4,this.maxQueueSize=null!==(o=null==t?void 0:t.maxQueueSize)&&void 0!==o?o:20,this.queue=[],this.sampleRate>0){var u=!1,a=function(){u||(u=!0,i.flush().catch(g),u=!1,setTimeout(a,i.flushTimer))};a()}}return t.prototype.increment=function(t,e){if(t.includes("receiver_js.")&&0!==e.length&&!(Math.random()>this.sampleRate||this.queue.length>=this.maxQueueSize)){var r=function(t,e,n){var r=e.reduce((function(t,e){var n=e.split(":"),r=n[0],o=n[1];return t[r]=o,t}),{});return{type:"Counter",metric:t,value:1,tags:v(v({},r),{library:"receiver.js",library_version:"web"===n?"next-".concat(d):"npm:next-".concat(d)})}}(t,e,n());this.queue.push(r),t.includes("error")&&this.flush().catch(g)}},t.prototype.flush=function(){return b(this,void 0,Promise,(function(){var t=this;return m(this,(function(e){switch(e.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch((function(e){g(e),t.sampleRate=0}))];case 1:return e.sent(),[2]}}))}))},t.prototype.send=function(){return b(this,void 0,Promise,(function(){var t,e,n;return m(this,(function(r){return t={series:this.queue},this.queue=[],e={"Content-Type":"text/plain"},n="https://".concat(this.host,"/m"),[2,a(n,{headers:e,body:JSON.stringify(t),method:"POST"})]}))}))},t}(),O=(w=function(t,e){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},w(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O(e,t),e.initRemoteMetrics=function(t){_=new x(t)},e.prototype.increment=function(e,n,r){t.prototype.increment.call(this,e,n,r),null==_||_.increment(e,null!=r?r:[])},e}(h.s),j=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(t){function e(e,n){return t.call(this,e,n,new P)||this}return j(e,t),e.system=function(){return new this({type:"track",event:"system",channelId:""})},e}(p._),k=o(888),I=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},A=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function E(t,e,n,r){return I(this,void 0,void 0,(function(){var o,i;return A(this,(function(u){switch(u.label){case 0:return n.emit("dispatch_start",t),o=Date.now(),e.isEmpty()?[4,e.dispatchSingle(t)]:[3,2];case 1:return i=u.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:i=u.sent(),u.label=4;case 4:return(null==r?void 0:r.callback)?[4,(0,k.UI)(i,r.callback,(a=o,s=r.timeout,c=Date.now()-a,Math.max((null!=s?s:300)-c,0)))]:[3,6];case 5:i=u.sent(),u.label=6;case 6:return(null==r?void 0:r.debug)&&i.flush(),[2,i]}var a,s,c}))}))}var T=function(){function t(){this.callbacks={}}return t.prototype.on=function(t,e){return this.callbacks[t]?this.callbacks[t].push(e):this.callbacks[t]=[e],this},t.prototype.once=function(t,e){var n=this,r=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];n.off(t,r),e.apply(n,o)};return this.on(t,r),this},t.prototype.off=function(t,e){var n,r=(null!==(n=this.callbacks[t])&&void 0!==n?n:[]).filter((function(t){return t!==e}));return this.callbacks[t]=r,this},t.prototype.emit=function(t){for(var e,n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(null!==(e=this.callbacks[t])&&void 0!==e?e:[]).forEach((function(t){t.apply(n,r)})),this},t}(),D=o(380),M=function(t,e,n,r,o,i){return{__t:"bpc",c:e,p:r,u:t,s:n,t:o,r:i}},F=Object.keys(M("","","","","",""));var C=function(t){var e,n,r=t.c,o=t.p,i=t.s,u=t.u,a=t.r,s=t.t,c=r?function(t){try{return new URL(t).pathname}catch(e){return"/"===t[0]?t:"/"+t}}(r):o,l=r?function(t,e){return t.indexOf("?")>-1?t:t+e}(r,i):-1===(n=(e=u).indexOf("#"))?e:e.slice(0,n);return{path:c,referrer:a,search:i,title:s,url:l}},q=function(){var t=document.querySelector("link[rel='canonical']");return M(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},N=function(){return N=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},N.apply(this,arguments)},L=function(t,e){void 0===e&&(e=C(q()));var n=t.context;n.page=N(N(N({},e),undefined),n.page)},R=function(){return R=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},R.apply(this,arguments)},U=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},K=function(){function t(t){this.user=t}return t.prototype.track=function(t,e,n,r,o){return this.normalize(R(R({},this.baseEvent()),{channelId:t,userId:e,event:n,type:"track",properties:r}),o)},t.prototype.identify=function(t,e,n,r){return this.normalize(R(R({channelId:t},this.baseEvent()),{type:"identify",userId:e,traits:n}),r)},t.prototype.baseEvent=function(){return{}},t.prototype.context=function(t){var e=["integrations","anonymousId","timestamp","userId"],n={},r=Object.keys(n),o={},i={};return r.forEach((function(t){"context"!==t&&(e.includes(t)?(0,D.N)(i,t,n[t]):(0,D.N)(o,t,n[t]))})),[o,i]},t.prototype.normalize=function(t,e){var n=this.context(t),r=n[0],o=n[1],i=U(t,[]),u=R(R(R({timestamp:new Date},i),{context:r}),o);return L(u,e),u},t}();var G=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z="onRemoveFromFuture",B=function(t){function e(e,n,r){var o=t.call(this)||this;return o.future=[],o.maxAttempts=e,o.queue=n,o.seen=null!=r?r:{},o}return G(e,t),e.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e){return!(t.updateAttempts(e)>t.maxAttempts||t.includes(e))&&(t.queue.push(e),!0)}));return this.queue=this.queue.sort((function(e,n){return t.getAttempts(e)-t.getAttempts(n)})),r},e.prototype.pushWithBackoff=function(t){var e=this;if(0===this.getAttempts(t))return this.push(t)[0];var n=this.updateAttempts(t);if(n>this.maxAttempts||this.includes(t))return!1;var r=function(t){var e=Math.random()+1,n=t.minTimeout,r=void 0===n?500:n,o=t.factor,i=void 0===o?2:o,u=t.attempt,a=t.maxTimeout,s=void 0===a?1/0:a;return Math.min(e*r*Math.pow(i,u),s)}({attempt:n-1});return setTimeout((function(){e.queue.push(t),e.future=e.future.filter((function(e){return e.id!==t.id})),e.emit(z)}),r),this.future.push(t),!0},e.prototype.getAttempts=function(t){var e;return null!==(e=this.seen[t.id])&&void 0!==e?e:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||Boolean(this.queue.find((function(e){return e.id===t.id})))||Boolean(this.future.find((function(e){return e.id===t.id})))},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(T),J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(){return H=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},H.apply(this,arguments)},W=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},V={getItem:function(){},setItem:function(){},removeItem:function(){}};try{V=(0,l.j)()&&window.localStorage?window.localStorage:V}catch(t){console.warn("Unable to access localStorage",t)}function Y(t){var e=V.getItem(t);return(e?JSON.parse(e):[]).map((function(t){return new S(t.event,t.id)}))}function Q(t){var e=V.getItem(t);return e?JSON.parse(e):{}}function Z(t){V.removeItem(t)}function X(t,e,n){void 0===n&&(n=0);var r="persisted-queue:v1:".concat(t,":lock"),o=V.getItem(r),i=o?JSON.parse(o):null,u=null===i||function(t){return(new Date).getTime()>t}(i);if(u)return V.setItem(r,JSON.stringify((new Date).getTime()+50)),e(),void V.removeItem(r);!u&&n<3?setTimeout((function(){X(t,e,n+1)}),50):console.error("Unable to retrieve lock")}var $=function(t){function e(e,n){var r=t.call(this,e,[])||this,o="persisted-queue:v1:".concat(n,":items"),i="persisted-queue:v1:".concat(n,":seen"),u=[],a={};return X(n,(function(){try{u=Y(o),a=Q(i),Z(o),Z(i),r.queue=W(W([],u,!0),r.queue,!0),r.seen=H(H({},a),r.seen)}catch(t){console.error(t)}})),window.addEventListener("pagehide",(function(){if(r.todo>0){var t=W(W([],r.queue,!0),r.future,!0);try{X(n,(function(){!function(t,e){var n=Y(t),r=W(W([],e,!0),n,!0).reduce((function(t,e){var n;return H(H({},t),((n={})[e.id]=e,n))}),{});V.setItem(t,JSON.stringify(Object.values(r)))}(o,t),function(t,e){var n=Q(t);V.setItem(t,JSON.stringify(H(H({},n),e)))}(i,r.seen)}))}catch(t){console.error(t)}}})),r}return J(e,t),e}(B),tt=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};var et=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},nt=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function rt(t,e){t.log("debug","plugin",{plugin:e.name});var n=(new Date).getTime(),r=e[t.event.type];if(void 0===r)return Promise.resolve(t);var o=function(t){return et(this,void 0,void 0,(function(){var e;return nt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,n.sent()];case 2:return e=n.sent(),[2,Promise.reject(e)];case 3:return[2]}}))}))}((function(){return r.apply(e,[t])})).then((function(t){var r=(new Date).getTime()-n;return t.stats.gauge("plugin_time",r,["plugin:".concat(e.name)]),t})).catch((function(n){if(n instanceof p.Y&&"middleware_cancellation"===n.type)throw n;return n instanceof p.Y?(t.log("warn",n.type,{plugin:e.name,error:n}),n):(t.log("error","plugin Error",{plugin:e.name,error:n}),t.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),n)}));return o}function ot(t,e){return rt(t,e).then((function(e){if(e instanceof p._)return e;t.log("debug","Context canceled"),t.stats.increment("context_canceled"),t.cancel(e)}))}var it=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},at=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},st=function(t){function e(e){var n,r,o,i=t.call(this)||this;return i.criticalTasks=(o=0,{done:function(){return n},run:function(t){var e,i=t();return"object"==typeof(e=i)&&null!==e&&"then"in e&&"function"==typeof e.then&&(1==++o&&(n=new Promise((function(t){return r=t}))),i.finally((function(){return 0==--o&&r()}))),i}}),i.plugins=[],i.failedInitializations=[],i.flushing=!1,i.queue=e,i.queue.on(z,(function(){i.scheduleFlush(0)})),i}return it(e,t),e.prototype.register=function(t,e,n){return ut(this,void 0,void 0,(function(){var r=this;return at(this,(function(o){switch(o.label){case 0:return[4,Promise.resolve(e.load(t,n)).then((function(){r.plugins.push(e)})).catch((function(n){if("destination"===e.type)return r.failedInitializations.push(e.name),console.warn(e.name,n),void t.log("warn","Failed to load destination",{plugin:e.name,error:n});throw n}))];case 1:return o.sent(),[2]}}))}))},e.prototype.deregister=function(t,e,n){return ut(this,void 0,void 0,(function(){var r;return at(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e.unload?[4,Promise.resolve(e.unload(t,n))]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.plugins=this.plugins.filter((function(t){return t.name!==e.name})),[3,4];case 3:return r=o.sent(),t.log("warn","Failed to unload destination",{plugin:e.name,error:r}),[3,4];case 4:return[2]}}))}))},e.prototype.dispatch=function(t){return ut(this,void 0,void 0,(function(){var e;return at(this,(function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),e=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,e]}))}))},e.prototype.subscribeToDelivery=function(t){return ut(this,void 0,void 0,(function(){var e=this;return at(this,(function(n){return[2,new Promise((function(n){var r=function(o,i){o.isSame(t)&&(e.off("flush",r),n(o))};e.on("flush",r)}))]}))}))},e.prototype.dispatchSingle=function(t){return ut(this,void 0,void 0,(function(){var e=this;return at(this,(function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch((function(n){return e.enqueuRetry(n,t)?e.subscribeToDelivery(t):(t.setFailedDelivery({reason:n}),t)}))]}))}))},e.prototype.isEmpty=function(){return 0===this.queue.length},e.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout((function(){e.flush().then((function(){setTimeout((function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)}),0)}))}),t))},e.prototype.deliver=function(t){return ut(this,void 0,void 0,(function(){var e,n,r,o;return at(this,(function(i){switch(i.label){case 0:return[4,this.criticalTasks.done()];case 1:i.sent(),e=Date.now(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=i.sent(),n=Date.now()-e,this.emit("delivery_success",t),t.stats.gauge("delivered",n),t.log("debug","Delivered",t.event),[2,t];case 4:throw r=i.sent(),o=r,t.log("error","Failed to deliver",o),this.emit("delivery_failure",t,o),t.stats.increment("delivery_failed"),r;case 5:return[2]}}))}))},e.prototype.enqueuRetry=function(t,e){return!(t instanceof p.Y&&!t.retry)&&this.queue.pushWithBackoff(e)},e.prototype.flush=function(){return ut(this,void 0,void 0,(function(){var t,e;return at(this,(function(n){switch(n.label){case 0:if(0===this.queue.length)return[2,[]];if(!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=n.sent(),this.emit("flush",t,!0),[3,4];case 3:return e=n.sent(),this.enqueuRetry(e,t)||(t.setFailedDelivery({reason:e}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}}))}))},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var e,n,r=this.plugins.filter((function(e){var n,r,o;if("destination"!==e.type&&"Segment.io"!==e.name)return!0;var i=void 0;return null===(n=e.alternativeNames)||void 0===n||n.forEach((function(e){void 0!==t[e]&&(i=t[e])})),null!==(o=null!==(r=t[e.name])&&void 0!==r?r:i)&&void 0!==o?o:!1!==("Segment.io"===e.name||t.All)})),o=(e="type",n={},r.forEach((function(t){var r,o=void 0;if("string"==typeof e){var i=t[e];o="string"!=typeof i?JSON.stringify(i):i}else e instanceof Function&&(o=e(t));void 0!==o&&(n[o]=tt(tt([],null!==(r=n[o])&&void 0!==r?r:[],!0),[t],!1))})),n),i=o.before,u=void 0===i?[]:i,a=o.enrichment,s=void 0===a?[]:a,c=o.destination,l=void 0===c?[]:c,f=o.after;return{before:u,enrichment:s,destinations:l,after:void 0===f?[]:f}},e.prototype.flushOne=function(t){return ut(this,void 0,void 0,(function(){var e,n,r,o,i,u,a,s,c,l,f,h,d,y;return at(this,(function(v){switch(v.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),e=this.availableExtensions({}),n=e.before,r=e.enrichment,o=0,i=n,v.label=1;case 1:return o<i.length?(u=i[o],[4,ot(t,u)]):[3,4];case 2:(l=v.sent())instanceof p._&&(t=l),this.emit("message_enriched",t,u),v.label=3;case 3:return o++,[3,1];case 4:a=0,s=r,v.label=5;case 5:return a<s.length?(c=s[a],[4,rt(t,c)]):[3,8];case 6:(l=v.sent())instanceof p._&&(t=l),this.emit("message_enriched",t,c),v.label=7;case 7:return a++,[3,5];case 8:return f=this.availableExtensions({}),h=f.destinations,d=f.after,[4,new Promise((function(e,n){setTimeout((function(){var r=h.map((function(e){return rt(t,e)}));Promise.all(r).then(e).catch(n)}),0)}))];case 9:return v.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),y=d.map((function(e){return rt(t,e)})),[4,Promise.all(y)];case 10:return v.sent(),[2,t]}}))}))},e}(T),ct=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},ft=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},pt=function(t){function e(e){return t.call(this,"string"==typeof e?new $(4,e):e)||this}return ct(e,t),e.prototype.flush=function(){return lt(this,void 0,Promise,(function(){return ft(this,(function(e){return f()?[2,[]]:[2,t.prototype.flush.call(this)]}))}))},e}(st),ht=o(831);function dt(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var o=r[n];if("constructor"!==o){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,o);i&&"function"==typeof i.value&&(t[o]=t[o].bind(t))}}return t}var yt={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},vt=function(t,e,n,r){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(r))},bt=function(){function t(t){this.stores=t}return t.prototype.get=function(t){for(var e=null,n=0,r=this.stores;n<r.length;n++){var o=r[n];try{if(null!=(e=o.get(t)))return e}catch(e){vt(o,"get",t,e)}}return null},t.prototype.set=function(t,e){this.stores.forEach((function(n){try{n.set(t,e)}catch(e){vt(n,"set",t,e)}}))},t.prototype.clear=function(t){this.stores.forEach((function(e){try{e.remove(t)}catch(n){vt(e,"remove",t,n)}}))},t.prototype.getAndSync=function(t){var e=this.get(t),n="number"==typeof e?e.toString():e;return this.set(t,n),n},t}(),mt=function(){function t(){this.cache={}}return t.prototype.get=function(t){var e;return null!==(e=this.cache[t])&&void 0!==e?e:null},t.prototype.set=function(t,e){this.cache[t]=e},t.prototype.remove=function(t){delete this.cache[t]},t}();function gt(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every((function(t){return Object.values(yt).includes(t)}))}function wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var _t=function t(e,n){function r(t,r,o){if("undefined"!=typeof document){"number"==typeof(o=wt({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var u in o)o[u]&&(i+="; "+u,!0!==o[u]&&(i+="="+o[u].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+i}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),u=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=e.read(u,a),t===a)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",wt({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,wt({},this.attributes,e))},withConverter:function(e){return t(wt({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),xt=_t;function Ot(t){var e=function(t){try{return new URL(t)}catch(t){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0)return r;if(e.length<=1)return r;for(var o=e.length-2;o>=0;--o)r.push(e.slice(o).join("."));return r}(e),r=0;r<n.length;++r){var o="__tld__",i=n[r],u={domain:"."+i};try{if(xt.set(o,"1",u),xt.get(o))return xt.remove(o,u),i}catch(t){return}}}var Pt=function(){return Pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Pt.apply(this,arguments)},jt=function(){function t(e){void 0===e&&(e=t.defaults),this.options=Pt(Pt({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:365,domain:Ot(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(t){var e;try{var n=xt.get(t);if(null==n)return null;try{return null!==(e=JSON.parse(n))&&void 0!==e?e:null}catch(t){return null!=n?n:null}}catch(t){return null}},t.prototype.set=function(t,e){"string"==typeof e?xt.set(t,e,this.opts()):null===e?xt.remove(t,this.opts()):xt.set(t,JSON.stringify(e),this.opts())},t.prototype.remove=function(t){return xt.remove(t,this.opts())},t}(),St=function(){function t(){}return t.prototype.localStorageWarning=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},t.prototype.get=function(t){var e;try{var n=localStorage.getItem(t);if(null===n)return null;try{return null!==(e=JSON.parse(n))&&void 0!==e?e:null}catch(t){return null!=n?n:null}}catch(e){return this.localStorageWarning(t,"unavailable"),null}},t.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){this.localStorageWarning(t,"full")}},t.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){this.localStorageWarning(t,"unavailable")}},t}();function kt(t){return t.map((function(t){var e,n;switch(!function(t){return"object"==typeof t&&void 0!==t.name}(t)?e=t:(e=t.name,n=t.settings),e){case yt.Cookie:return new jt(n);case yt.LocalStorage:return new St;case yt.Memory:return new mt;default:throw new Error("Unknown Store Type: ".concat(t))}}))}function It(t,e){return t.map((function(t){return e&&t===yt.Cookie?{name:t,settings:e}:t}))}var At=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(){return Et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Et.apply(this,arguments)},Tt={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},Dt=function(){function t(t,e){var n,r,o,i,u=this;void 0===t&&(t=Tt),this.options={},this.id=function(t){if(u.options.disable)return null;var e=u.identityStore.getAndSync(u.idKey);void 0!==t&&(u.identityStore.set(u.idKey,t),t!==e&&null!==e&&null!==t&&u.anonymousId(null));var n=u.identityStore.getAndSync(u.idKey);if(n)return n;var r=u.legacyUserStore.get(Tt.cookie.oldKey);return r?"object"==typeof r?r.id:r:null},this.anonymousId=function(t){var e,n;if(u.options.disable)return null;if(void 0===t){var r=null!==(e=u.identityStore.getAndSync(u.anonKey))&&void 0!==e?e:null===(n=u.legacySIO())||void 0===n?void 0:n[0];if(r)return r}return null===t?(u.identityStore.set(u.anonKey,null),u.identityStore.getAndSync(u.anonKey)):(u.identityStore.set(u.anonKey,null!=t?t:(0,ht.v4)()),u.identityStore.getAndSync(u.anonKey))},this.traits=function(t){var e;if(!u.options.disable)return null===t&&(t={}),t&&u.traitsStore.set(u.traitsKey,null!=t?t:{}),null!==(e=u.traitsStore.get(u.traitsKey))&&void 0!==e?e:{}},this.options=Et(Et({},Tt),t),this.cookieOptions=e,this.idKey=null!==(r=null===(n=t.cookie)||void 0===n?void 0:n.key)&&void 0!==r?r:Tt.cookie.key,this.traitsKey=null!==(i=null===(o=t.localStorage)||void 0===o?void 0:o.key)&&void 0!==i?i:Tt.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,e),this.legacyUserStore=this.createStorage(this.options,e,(function(t){return t===yt.Cookie})),this.traitsStore=this.createStorage(this.options,e,(function(t){return t!==yt.Cookie}));var a=this.legacyUserStore.get(Tt.cookie.oldKey);a&&"object"==typeof a&&(a.id&&this.id(a.id),a.traits&&this.traits(a.traits)),dt(this)}return t.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!=e?e:{};var n=this.id();null!==n&&n!==t||(e=Et(Et({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(t,e,n){var r=[yt.LocalStorage,yt.Cookie,yt.Memory];return t.disable?new bt([]):t.persist?(void 0!==t.storage&&null!==t.storage&&gt(t.storage)&&(r=t.storage.stores),t.localStorageFallbackDisabled&&(r=r.filter((function(t){return t!==yt.LocalStorage}))),n&&(r=r.filter(n)),new bt(kt(It(r,e)))):new bt([new mt])},t.defaults=Tt,t}(),Mt={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},Ft=function(t){function e(e,n){void 0===e&&(e=Mt);var r=t.call(this,Et(Et({},Mt),e),n)||this;return r.anonymousId=function(t){},dt(r),r}return At(e,t),e}(Dt),Ct=o(905),qt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},Nt=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Lt=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Rt=function(t,e,n){n.getCalls(t).forEach((function(t){Vt(e,t).catch(console.error)}))},Ut=function(t,e){return qt(void 0,void 0,void 0,(function(){var n,r,o;return Nt(this,(function(i){switch(i.label){case 0:n=0,r=e.getCalls("addSourceMiddleware"),i.label=1;case 1:return n<r.length?(o=r[n],[4,Vt(t,o).catch(console.error)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},Kt=Rt.bind(void 0,"on"),Gt=Rt.bind(void 0,"setAnonymousId"),zt=function(t,e){e.toArray().forEach((function(e){setTimeout((function(){Vt(t,e).catch(console.error)}),0)}))},Bt=function(t){if(Jt(t)){var e=t.pop();return C(e)}},Jt=function(t){return function(t){if(!(0,s.PO)(t))return!1;if("bpc"!==t.__t)return!1;for(var e in t)if(!F.includes(e))return!1;return!0}(t[t.length-1])},Ht=function(t,e,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=console.error),this.method=t,this.resolve=n,this.reject=r,this.called=!1,this.args=e},Wt=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._callMap={},this.push.apply(this,t)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),t.prototype.getCalls=function(t){var e;return null!==(e=this.calls[t])&&void 0!==e?e:[]},t.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){["track","identify"].includes(e.method)&&!Jt(e.args)&&(e.args=Lt(Lt([],e.args,!0),[q()],!1)),t.calls[e.method]?t.calls[e.method].push(e):t.calls[e.method]=[e]}))},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){var t=(0,Ct.aV)();if(Array.isArray(t)){var e=t.splice(0,t.length).map((function(t){var e=t[0],n=t.slice(1);return new Ht(e,n)}));this.push.apply(this,e)}},t}();function Vt(t,e){return qt(this,void 0,Promise,(function(){var n,r;return Nt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,n=t[e.method].apply(t,e.args),"object"==typeof(i=n)&&null!==i&&"then"in i&&"function"==typeof i.then?[4,n]:[3,2]);case 1:o.sent(),o.label=2;case 2:return e.resolve(n),[3,4];case 3:return r=o.sent(),e.reject(r),[3,4];case 4:return[2]}var i}))}))}var Yt=function(){function t(t){var e=this;this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.debug=this._createChainableMethod("debug"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=d,this._preInitBuffer=new Wt,this._promise=t(this._preInitBuffer),this._promise.then((function(t){var n=t[0],r=t[1];e.instance=n,e.ctx=r})).catch((function(){}))}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(e.instance){var i=(n=e.instance)[t].apply(n,r);return Promise.resolve(i)}return new Promise((function(n,o){e._preInitBuffer.push(new Ht(t,r,n,o))}))}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e.instance?((n=e.instance)[t].apply(n,r),e):(e._preInitBuffer.push(new Ht(t,r)),e)}},t}(),Qt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zt=function(){return Zt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Zt.apply(this,arguments)},Xt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},$t=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},te=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},ee=u();null==ee||ee.receiver;var ne=function(t){function e(e,n,r,o,i){var u,a,s,c=t.call(this)||this;c._debug=!1,c.initialized=!1,c.user=function(){return c._user};var l=null==n?void 0:n.cookie,f=null!==(u=null==n?void 0:n.disableClientPersistence)&&void 0!==u&&u;c.settings=e,c.settings.timeout=null!==(a=c.settings.timeout)&&void 0!==a?a:300,c.queue=null!=r?r:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=e?4:1,o=n?new B(r,[]):new $(r,t);return new pt(o)}("".concat(e.writeKey,":event-queue"),null==n?void 0:n.retryQueue,f);var p=null==n?void 0:n.storage;return c._universalStorage=c.createStore(f,p,l),c._user=null!=o?o:new Dt(Zt({persist:!f,storage:null==n?void 0:n.storage},null==n?void 0:n.user),l).load(),c._group=null!=i?i:new Ft(Zt({persist:!f,storage:null==n?void 0:n.storage},null==n?void 0:n.group),l).load(),c.eventFactory=new K(c._user),c.integrations=null!==(s=null==n?void 0:n.integrations)&&void 0!==s?s:{},c.options=null!=n?n:{},dt(c),c}return Qt(e,t),e.prototype.createStore=function(t,e,n){return t?new bt([new mt]):e&&gt(e)?new bt(kt(It(e.stores,n))):new bt(kt([yt.LocalStorage,{name:yt.Cookie,settings:n},yt.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n,r,o,i,u,a,s,l=this;return $t(this,(function(f){return e=Bt(t),n=c.apply(void 0,t),r=n[0],o=n[1],i=n[2],u=n[3],n[4],a=n[5],s=this.eventFactory.track(r,o,i,u,e),[2,this._dispatch(s,a).then((function(t){return l.emit("track",i,t.event.properties),t}))]}))}))},e.prototype.identify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n,r,o,i,u,a=this;return $t(this,(function(c){var l;return e=Bt(t),n=(l=this._user,function(){for(var t,e,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];for(var i={},u=["callback","options","traits","id"],a=0,c=r;a<c.length;a++){var f=c[a],p=u.pop();if("id"===p){if((0,s.HD)(f)||(0,s.hj)(f)){i.id=f.toString();continue}if(null==f)continue;p=u.pop()}if("traits"!==p&&"options"!==p||null!=f&&!(0,s.PO)(f)||(i[p]=f),(0,s.mf)(f)){i.callback=f;break}}return[null!==(t=i.id)&&void 0!==t?t:l.id(),null!==(e=i.traits)&&void 0!==e?e:{},null!==(n=i.options)&&void 0!==n?n:{},i.callback]}).apply(void 0,t),r=n[0],o=n[1],n[2],i=n[3],this._user.identify(r,o),u=this.eventFactory.identify("channelId",this._user.id(),this._user.traits(),e),[2,this._dispatch(u,i).then((function(t){return a.emit("identify",t.event.userId,t.event.traits),t}))]}))}))},e.prototype.trackClick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n;return $t(this,(function(r){switch(r.label){case 0:return[4,o.e(119).then(o.bind(o,956))];case 1:return e=r.sent(),[2,(n=e.link).call.apply(n,te([this],t,!1))]}}))}))},e.prototype.trackLink=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n;return $t(this,(function(r){switch(r.label){case 0:return[4,o.e(119).then(o.bind(o,956))];case 1:return e=r.sent(),[2,(n=e.link).call.apply(n,te([this],t,!1))]}}))}))},e.prototype.trackSubmit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n;return $t(this,(function(r){switch(r.label){case 0:return[4,o.e(119).then(o.bind(o,956))];case 1:return e=r.sent(),[2,(n=e.form).call.apply(n,te([this],t,!1))]}}))}))},e.prototype.trackForm=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n;return $t(this,(function(r){switch(r.label){case 0:return[4,o.e(119).then(o.bind(o,956))];case 1:return e=r.sent(),[2,(n=e.form).call.apply(n,te([this],t,!1))]}}))}))},e.prototype.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n,r=this;return $t(this,(function(o){switch(o.label){case 0:return e=S.system(),n=t.map((function(t){return r.queue.register(e,t,r)})),[4,Promise.all(n)];case 1:return o.sent(),[2,e]}}))}))},e.prototype.deregister=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Xt(this,void 0,Promise,(function(){var e,n,r=this;return $t(this,(function(o){switch(o.label){case 0:return e=S.system(),n=t.map((function(t){var n=r.queue.plugins.find((function(e){return e.name===t}));if(n)return r.queue.deregister(e,n,r);e.log("warn","plugin ".concat(t," not found"))})),[4,Promise.all(n)];case 1:return o.sent(),[2,e]}}))}))},e.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,e){return Xt(this,void 0,Promise,(function(){var n;return $t(this,(function(r){return n=new S(t),f()&&!this.options.retryQueue?[2,n]:[2,E(n,this.queue,this,{callback:e,debug:this._debug,timeout:this.settings.timeout})]}))}))},e.prototype.addSourceMiddleware=function(t){return Xt(this,void 0,Promise,(function(){var e=this;return $t(this,(function(n){switch(n.label){case 0:return[4,this.queue.criticalTasks.run((function(){return Xt(e,void 0,void 0,(function(){var e,n;return $t(this,(function(r){switch(r.label){case 0:return[4,Promise.resolve().then(o.bind(o,338))];case 1:return e=r.sent().sourceMiddlewarePlugin,{},n=e(t),[4,this.register(n)];case 2:return r.sent(),[2]}}))}))}))];case 1:return n.sent(),[2,this]}}))}))},e.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queue.plugins.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()})).forEach((function(t){t.addMiddleware.apply(t,e)})),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return Xt(this,void 0,Promise,(function(){return $t(this,(function(e){switch(e.label){case 0:return!1===this.options.useQueryString?[2,[]]:[4,o.e(96).then(o.bind(o,473))];case 1:return[2,(0,e.sent().queryString)(this,t)]}}))}))},e.prototype.ready=function(t){return void 0===t&&(t=function(t){return t}),Xt(this,void 0,Promise,(function(){return $t(this,(function(e){return[2,Promise.all(this.queue.plugins.map((function(t){return t.ready?t.ready():Promise.resolve()}))).then((function(e){return t(e),e}))]}))}))},Object.defineProperty(e.prototype,"VERSION",{get:function(){return d},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var e=t.shift();e&&!this[e]||this[e].apply(this,t)},e}(T),re=function(){return re=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},re.apply(this,arguments)};var oe=o(863),ie=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},ue=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function ae(t){return ie(this,void 0,Promise,(function(){var e;return ue(this,(function(n){return(e=navigator.userAgentData)?t?[2,e.getHighEntropyValues(t).catch((function(){return e.toJSON()}))]:[2,e.toJSON()]:[2,void 0]}))}))}var se,ce=function(){return ce=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ce.apply(this,arguments)},le=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},fe=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function pe(){if(se)return se;var t=Ot(window.location.href);return se={expires:31536e6,secure:!1,path:"/"},t&&(se.domain=t),se}var he=function(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(e,n){return le(t,void 0,void 0,(function(){var t;return fe(this,(function(e){switch(e.label){case 0:this.instance=n,e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,ae(this.instance.options.highEntropyValuesClientHints)];case 2:return t.userAgentData=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve()]}}))}))},this.enrich=function(e){var r,o,i=e.event.context,u=i.page.search||"",a="object"==typeof u?function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach((function(t){var n=t[0],r=t[1];Array.isArray(r)?r.forEach((function(t){return e.append(n,t)})):e.append(n,r)})),e.toString()}catch(t){return""}}(u):u;i.userAgent=navigator.userAgent,i.userAgentData=t.userAgentData;var s=navigator.userLanguage||navigator.language;void 0===i.locale&&void 0!==s&&(i.locale=s),null!==(r=i.library)&&void 0!==r||(i.library={name:"receiver.js",version:"".concat("web"===n()?"next":"npm:next","-").concat(d)}),a&&!i.campaign&&(i.campaign=function(t){return t.startsWith("?")&&(t=t.substring(1)),(t=t.replace(/\?/g,"&")).split("&").reduce((function(t,e){var n=e.split("="),r=n[0],o=n[1],i=void 0===o?"":o;if(r.includes("utm_")&&r.length>4){var u=r.slice(4);"campaign"===u&&(u="name"),t[u]=(0,oe.a)(i)}return t}),{})}(a));var c=function(){var t=xt.get("_ga");if(t&&t.startsWith("amp"))return t}();c&&(i.amp={id:c}),function(t,e,n){var r,o=new bt(n?[]:[new jt(pe())]),i=o.get("s:context.referrer"),u=null!==(r=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=0,r=(t=t.replace(/\?/g,"&")).split("&");n<r.length;n++){var o=r[n].split("="),i=o[0],u=o[1];if(e[i])return{id:u,type:e[i]}}}(t))&&void 0!==r?r:i;u&&(e&&(e.referrer=ce(ce({},e.referrer),u)),o.set("s:context.referrer",u))}(a,i,null!==(o=t.instance.options.disableClientPersistence)&&void 0!==o&&o);try{i.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}return e},this.track=this.enrich,this.identify=this.enrich},de=new he,ye=o(70),ve=o(338),be=function(){return be=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},be.apply(this,arguments)},me=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},ge=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},we=function(){function t(t,e){this.version="1.0.0",this.alternativeNames=[],this.middleware=[],this.identify=this._createMethod("identify"),this.track=this._createMethod("track"),this.action=e,this.name=t,this.type=e.type,this.alternativeNames.push(e.name)}return t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"destination"===this.type&&(t=this.middleware).push.apply(t,e)},t.prototype.transform=function(t){return me(this,void 0,Promise,(function(){var e;return ge(this,(function(n){switch(n.label){case 0:return[4,(0,ve.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null===(e=n.sent())&&t.cancel(new p.Y({retry:!1,reason:"dropped by destination middleware"})),[2,new S(e)]}}))}))},t.prototype._createMethod=function(t){var e=this;return function(n){return me(e,void 0,Promise,(function(){var e;return ge(this,(function(r){switch(r.label){case 0:return this.action[t]?(e=n,"destination"!==this.type?[3,2]:[4,this.transform(n)]):[2,n];case 1:e=r.sent(),r.label=2;case 2:return[4,this.action[t](e)];case 3:return r.sent(),[2,n]}}))}))}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return this.action.ready?this.action.ready():Promise.resolve()},t.prototype.load=function(t,e){return this.action.load(t,e)},t.prototype.unload=function(t,e){var n,r;return null===(r=(n=this.action).unload)||void 0===r?void 0:r.call(n,t,e)},t}();function _e(e,n){return me(this,void 0,Promise,(function(){var r,o,i,u,a;return ge(this,(function(s){switch(s.label){case 0:if(r=new RegExp("https://cdn.tronic.(com|build)"),o=(0,t.Vl)(),!n)return[3,6];i=e.url.split("/"),u=i[i.length-2],a=e.url.replace(u,btoa(u).replace(/=/g,"")),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,(0,ye.v)(a.replace(r,o))];case 2:return s.sent(),[3,5];case 3:return s.sent(),[4,(0,ye.v)(e.url.replace(r,o))];case 4:return s.sent(),[3,5];case 5:return[3,8];case 6:return[4,(0,ye.v)(e.url.replace(r,o))];case 7:s.sent(),s.label=8;case 8:return"function"==typeof window[e.libraryName]?[2,window[e.libraryName]]:[2]}}))}))}function xe(t,e,n,r,o,i){var u,a,s;return me(this,void 0,Promise,(function(){var c,l,f,p=this;return ge(this,(function(h){switch(h.label){case 0:return c=[],l=null!==(a=null===(u=t.middlewareSettings)||void 0===u?void 0:u.routingRules)&&void 0!==a?a:[],f=(null!==(s=t.remotePlugins)&&void 0!==s?s:[]).map((function(t){return me(p,void 0,void 0,(function(){var u,a,s,f,p,h;return ge(this,(function(d){switch(d.label){case 0:if(function(t,e){var n=t[e.creationName],r=t[e.name];return!1===t.All&&!n&&!r||!1===n||!1===r}(e,t))return[2];d.label=1;case 1:return d.trys.push([1,6,,7]),(a=null==i?void 0:i.find((function(e){return e.pluginName===t.name})))?[3,3]:[4,_e(t,r)];case 2:a=d.sent(),d.label=3;case 3:return(u=a)?[4,u(be(be({},t.settings),n[t.name]))]:[3,5];case 4:s=d.sent(),function(t){if(!Array.isArray(t))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach((function(t){e.forEach((function(e){var n;if(void 0===t[e])throw new Error("Plugin: ".concat(null!==(n=t.name)&&void 0!==n?n:"unknown"," missing required function ").concat(e))}))}))}(f=Array.isArray(s)?s:[s]),p=l.filter((function(e){return e.destinationName===t.creationName})),f.forEach((function(e){var n=new we(t.creationName,e);p.length&&o&&"destination"===e.type&&n.addMiddleware(o),c.push(n)})),d.label=5;case 5:return[3,7];case 6:return h=d.sent(),console.warn("Failed to load Remote Plugin",h),[3,7];case 7:return[2]}}))}))})),[4,Promise.all(f)];case 1:return h.sent(),[2,c.filter(Boolean)]}}))}))}var Oe=o(950),Pe=function(t){var e=!1;window.addEventListener("pagehide",(function(){e||t(e=!0)})),document.addEventListener("visibilitychange",(function(){if("hidden"==document.visibilityState){if(e)return;e=!0}else e=!1;t(e)}))},je=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},Se=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ke=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},Ie=500;function Ae(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}function Ee(t,e){var n,r,o,i=[],u=!1,s=null!==(n=null==e?void 0:e.size)&&void 0!==n?n:10,c=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:5e3;function l(e){var n;if(0!==e.length){var r=null===(n=e[0])||void 0===n?void 0:n.writeKey,o=e.map((function(t){var e=t;e.sentAt;return ke(e,["sentAt"])}));return a("https://".concat(t,"/b"),{keepalive:u,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey:r,batch:o,sentAt:(new Date).toISOString()})})}}function f(){return je(this,void 0,Promise,(function(){var t;return Se(this,(function(e){return i.length?(t=i,i=[],[2,l(t)]):[2]}))}))}return Pe((function(t){if((u=t)&&i.length){var e=function(t){var e=[],n=0;return t.forEach((function(t){Ae(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]})),e}(i).map(l);Promise.all(e).catch(console.error)}})),{dispatch:function(t,e){return je(this,void 0,Promise,(function(){var t;return Se(this,(function(n){return i.push(e),t=i.length>=s||function(t){return Ae(t)>=Ie-50}(i),[2,t||u?f():void(o||(o=setTimeout((function(){o=void 0,f().catch(console.error)}),c)))]}))}))}}}var Te=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},De=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Me=function(t,e){return Te(void 0,void 0,Promise,(function(){var n;return De(this,(function(r){return n=function(r){return Te(void 0,void 0,Promise,(function(){var o;return De(this,(function(i){switch(i.label){case 0:return t(r)?(o=n,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[i.sent()])];case 2:return[2]}}))}))},[2,n(void 0)]}))}))},Fe=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},Ce=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function qe(t,e){return Fe(this,void 0,Promise,(function(){var n,r=this;return Ce(this,(function(o){switch(o.label){case 0:return n=[],f()?[2,e]:[4,Me((function(){return e.length>0&&!f()}),(function(){return Fe(r,void 0,void 0,(function(){var r,o;return Ce(this,(function(i){switch(i.label){case 0:return(r=e.pop())?[4,rt(r,t)]:[2];case 1:return o=i.sent(),o instanceof S||n.push(r),[2]}}))}))}))];case 1:return o.sent(),n.map((function(t){return e.pushWithBackoff(t)})),[2,e]}}))}))}function Ne(t,e,n,r){var o=this;t||setTimeout((function(){return Fe(o,void 0,void 0,(function(){var t,o;return Ce(this,(function(i){switch(i.label){case 0:return t=!0,[4,qe(n,e)];case 1:return o=i.sent(),t=!1,e.todo>0&&r(t,o,n,r),[2]}}))}))}),5e3*Math.random())}var Le=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},Re=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function Ue(t,e,n){var r,o;window.addEventListener("pagehide",(function(){s.push.apply(s,Array.from(c)),c.clear()}));var i,u=null!==(r=null==e?void 0:e.apiKey)&&void 0!==r?r:"",s=t.options.disableClientPersistence?new B(t.queue.queue.maxAttempts,[]):new $(t.queue.queue.maxAttempts,"".concat(u,":dest-tronic")),c=new Set,l=!1,p=null!==(o=null==e?void 0:e.apiHost)&&void 0!==o?o:y,h="".concat("http","://").concat(p),d=null==e?void 0:e.deliveryStrategy,v="batching"===(null==d?void 0:d.strategy)?Ee(p,d.config):(i=null==d?void 0:d.config,{dispatch:function(t,e){return a(t,{keepalive:null==i?void 0:i.keepalive,headers:{"Content-Type":"application/json","X-Api-Key":"5663b25b-f8c3-4ccb-8f1f-fe891d3d1e9a"},method:"post",body:JSON.stringify(e)})}});function b(t){return Le(this,void 0,Promise,(function(){var e,n,r;return Re(this,(function(o){return f()?(s.push(t),Ne(l,s,m,Ne),[2,t]):(c.add(t),e="external/"+t.event.type,n=(0,Oe.D)(t.event).json(),"track"===t.event.type&&(delete n.type,delete n.traits,delete n.anonymousId,delete n.sentAt,delete n.context),r={userId:"2XWyaIZf7Tm2uQqa8fYH6GC0oYl",event:"event0",properties:{test:"property"},channelId:"2XWyaIasy88a5SJMoLKpkDuDt2O",timestamp:"2023-10-31T18:28:57.818Z"},[2,v.dispatch("".concat(h,"/").concat(e),r).then((function(){return t})).catch((function(){return s.pushWithBackoff(t),Ne(l,s,m,Ne),t})).finally((function(){c.delete(t)}))])}))}))}var m={name:"Tronic",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:b,identify:b};return s.todo&&Ne(l,s,m,Ne),m}var Ke=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(t){function e(e,n){var r=t.call(this,"".concat(e," ").concat(n))||this;return r.field=e,r}return Ke(e,t),e}(Error),ze="is not a string",Be="is not an object",Je="is nil";function He(t){var e=".userId/anonymousId/previousId/groupId",n=function(t){var e,n,r;return null!==(r=null!==(n=null!==(e=t.userId)&&void 0!==e?e:t.anonymousId)&&void 0!==n?n:t.groupId)&&void 0!==r?r:t.previousId}(t);if(!(0,s.Gg)(n))throw new Ge(e,Je);if(!(0,s.HD)(n))throw new Ge(e,ze)}function We(t){if(!(0,s.Gg)(t))throw new Ge("Event",Je);if("object"!=typeof t)throw new Ge("Event",Be)}function Ve(t){if(!(0,s.HD)(t.type))throw new Ge(".type",ze)}function Ye(t){if(!(0,s.HD)(t.event))throw new Ge(".event",ze)}function Qe(t){var e=t.event;return We(e),Ve(e),"track"===e.type&&Ye(e),He(e),t}var Ze,Xe,$e={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:Qe,identify:Qe},tn=null!==(Ze=(Xe=u()).__TRONIC_INSPECTOR__)&&void 0!==Ze?Ze:Xe.__TRONIC_INSPECTOR__={},en=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nn=function(){return nn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},nn.apply(this,arguments)},rn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{s(r.next(t))}catch(t){i(t)}}function a(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}s((r=r.apply(t,e||[])).next())}))},on=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(u=0)),u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=e.call(t,u)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},un=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function an(e,n){var r=null!=n?n:(0,t.Vl)();return a("".concat(r,"/v1/projects/").concat(e,"/settings")).then((function(t){return t.ok?t.json():t.text().then((function(t){throw new Error(t)}))})).catch((function(t){throw console.error(t.message),t}))}function sn(t,e){return rn(this,void 0,Promise,(function(){return on(this,(function(n){switch(n.label){case 0:return[4,Ut(t,e)];case 1:return n.sent(),zt(t,e),e.clear(),[2]}}))}))}function cn(t,e,n,r,i,u,a){var s;return void 0===u&&(u=[]),rn(this,void 0,Promise,(function(){var t,r,a,c,l,f,p,h=this;return on(this,(function(d){switch(d.label){case 0:return t=null==u?void 0:u.filter((function(t){return"object"==typeof t})),r=null==u?void 0:u.filter((function(t){return"function"==typeof t&&"string"==typeof t.pluginName})),a=function(t,e){var n,r=Object.entries(null!==(n=e.integrations)&&void 0!==n?n:{}).reduce((function(t,e){var n,r,o=e[0],i=e[1];return re(re({},t),"object"==typeof i?((n={})[o]=i,n):((r={})[o]={},r))}),{});return Object.entries(t.integrations).reduce((function(t,e){var n,o=e[0],i=e[1];return re(re({},t),((n={})[o]=re(re({},i),r[o]),n))}),{})}(e,i),[4,xe(e,n.integrations,a,i.obfuscate,void 0,r).catch((function(){return[]}))];case 1:return c=d.sent(),f=[un(un([$e,de],t,!0),c,!0)],[4,Ue(n,a.Tronic,e.integrations)];case 2:return l=un.apply(void 0,f.concat([[d.sent()],!1])),[4,n.register.apply(n,l)];case 3:return p=d.sent(),Object.entries(null!==(s=e.enabledMiddleware)&&void 0!==s?s:{}).some((function(t){return t[1]}))?[4,o.e(214).then(o.bind(o,568)).then((function(t){var r=t.remoteMiddlewares;return rn(h,void 0,void 0,(function(){var t,o;return on(this,(function(u){switch(u.label){case 0:return[4,r(p,e,i.obfuscate)];case 1:return t=u.sent(),o=t.map((function(t){return n.addSourceMiddleware(t)})),[2,Promise.all(o)]}}))}))}))]:[3,5];case 4:d.sent(),d.label=5;case 5:return[2,p]}}))}))}function ln(e,n,r){var o,i,u,a,s,c,l;return void 0===n&&(n={}),rn(this,void 0,Promise,(function(){var f,p,h,d,y,v,b,m,g;return on(this,(function(w){switch(w.label){case 0:return n.globalReceiverKey&&(0,Ct.D4)(n.globalReceiverKey),e.cdnURL&&(0,t.UH)(e.cdnURL),f={integrations:{}},n.updateCDNSettings&&(f=n.updateCDNSettings(f)),p=null===(u=null===(i=null===(o=null==f?void 0:f.integrations)||void 0===o?void 0:o["Segment.io"])||void 0===i?void 0:i.retryQueue)||void 0===u||u,h=nn({retryQueue:p},n),function(t){var e;null===(e=tn.attach)||void 0===e||e.call(tn,t)}(d=new ne(e,h)),y=null!==(a=e.plugins)&&void 0!==a?a:[],null!==(s=e.classicIntegrations)&&void 0!==s?s:[],P.initRemoteMetrics(f.metrics),function(t,e){Gt(t,e),Kt(t,e)}(d,r),[4,cn(e.writeKey,f,d,0,n,y)];case 1:return v=w.sent(),b=null!==(c=window.location.search)&&void 0!==c?c:"",m=null!==(l=window.location.hash)&&void 0!==l?l:"",(g=b.length?b:m.replace(/(?=#).*(?=\?)/,"")).includes("ajs_")?[4,d.queryString(g).catch(console.error)]:[3,3];case 2:w.sent(),w.label=3;case 3:return d.initialized=!0,d.emit("initialize",e,n),[4,sn(d,r)];case 4:return w.sent(),[2,[d,v]]}}))}))}var fn=function(t){function e(){var e,n,r,o=this,i=(r=new Promise((function(t,r){e=t,n=r})),{resolve:e,reject:n,promise:r}),u=i.promise,a=i.resolve;return o=t.call(this,(function(t){return u.then((function(e){return ln(e[0],e[1],t)}))}))||this,o._resolveLoadStart=function(t,e){return a([t,e])},o}return en(e,t),e.prototype.load=function(t,e){return void 0===e&&(e={}),this._resolveLoadStart(t,e),this},e.load=function(t,n){return void 0===n&&(n={}),(new e).load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then((function(t){return t[0]}))},e}(Yt),pn=(0,t.Vl)();(0,t.UH)(pn),o.p=pn+"/tronic-receiver/bundles/",function(t){e=t}("web")}(),i}()}));
//# sourceMappingURL=index.js.map